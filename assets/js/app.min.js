var app=app||{};app.angular=angular.module("app",[]),app.$=$.noConflict(),app.angular.service("DataService",function($http){"use strict";this.getWebsite=function(){return $http({method:"post",url:"webservice/restController.php?view=website",headers:{"Content-Type":"application/json;charset=utf-8"}})},this.getDB=function(){return $http({method:"post",url:"webservice/restController.php?view=db",headers:{"Content-Type":"application/json;charset=utf-8"}})},this.getData=function(type){var request=$http({method:"post",url:"webservice/restController.php?view="+type,headers:{"Content-Type":"application/json;charset=utf-8"}}).then(function(response){},function(response){});return request}}),app.angular.directive("bindRepeatDirective",function(){return function(scope,element,attrs){scope.$last&&setTimeout(function(){app.$("[title]").tooltipster(),app.$(".zoom").zoom({on:"grab"}),app.$("a.navigate").click(function(event){event.preventDefault();var anchor=app.$(this).attr("href"),top=app.$(anchor).offset().top-offset;app.$("html, body").animate({scrollTop:top},800),app.$(".hamburger").removeClass("is-active"),app.$("nav > ul").removeClass("is-visible")}),app.$(".report-link").off("click"),app.$(".report-link").click(function(event){event.preventDefault();var name="website automated reporting",email="postmaster@doomsdaypreppers.tk",message="Link broken: "+app.$(this).attr("data-name")+" => "+app.$(this).attr("data-url");app.$.ajax({type:"POST",data:{name:name,email:email,message:message},url:"webservice/sendmail.php",success:function(){alert(app.$("#link-reported").val())}})})},800)}}),app.angular.filter("aliasfilter",function(){return function(input,filter){var result=[];return angular.forEach(input,function(item){angular.forEach(filter,function(isfiltered,type){isfiltered&&parseInt(type)===item.category&&result.push(item)})}),result}}),app.angular.controller("doomsdayController",["$scope","$http","$sce","DataService",function($scope,$http,$sce,DataService){"use strict";var model={loadWebsite:null,loadDatabase:null,website:null,db:null,encode:null,replaceSpace:null,order:"name",filter:{0:!0,1:!0,2:!0},language:"pt-br"},userLang=navigator.language||navigator.userLanguage;"pt-BR"!==userLang&&"en-US"!==userLang||(model.language=userLang.toLowerCase()),model.loadWebsite=function(){var promise=DataService.getWebsite();promise.then(function(got){model.website=angular.fromJson(got.data),model.website.text[model.language].intro=$sce.trustAsHtml(model.website.text[model.language].intro),model.website.text[model.language].captcha=$sce.trustAsHtml(model.website.text[model.language].captcha),model.updateMetatags(model.language)},function(err){var errormsg="Fatal Error";$scope.status=errormsg,model.errorMessage=errormsg+": "+err.data.exceptionMessage})},model.loadDatabase=function(){var promise=DataService.getDB();promise.then(function(got){model.db=angular.fromJson(got.data),app.$(model.db.sections).each(function(index,list){app.$(list.list).each(function(otherindex,item){item.price=parseFloat(item.price)})})},function(err){var errormsg="Fatal Error";$scope.status=errormsg,model.errorMessage=errormsg+": "+err.data.exceptionMessage})},model.updataLanguage=function(lang){model.language=lang,model.website.text[model.language].intro=$sce.trustAsHtml(model.website.text[model.language].intro),model.website.text[model.language].captcha=$sce.trustAsHtml(model.website.text[model.language].captcha),model.updateMetatags(model.language),app.$("body").removeHighlight(),app.$("[title]").tooltipster(),app.$(".report-link").tooltipster("content",model.website.text[model.language].brokenlink),app.$(".go,.go-title").tooltipster("content",model.website.text[model.language].go),app.$(".optional").tooltipster("content",model.website.text[model.language].optional),app.$("#backtop > a").tooltipster("content",model.website.text[model.language].backTop),app.$("[title]").each(function(){app.$(this).tooltipster("content",app.$(this).attr("title"))})},model.updateMetatags=function(lang){var metas=[model.website.text[lang]["meta-keywords"],model.website.text[lang]["meta-description"],model.website.text[lang].title,model.website.settings.author,model.website.settings.type,model.website.settings.url,model.website.settings.updated],url=model.website.settings.url;app.$("html").attr("lang",lang),app.$('meta[property="og:locale"]').attr("content",lang),app.$("meta[name=keywords]").attr("content",metas[0]),app.$('meta[name=description],meta[property="og:description"],meta[name="twitter:description"]').attr("content",metas[1]),app.$("title").html(metas[2]),app.$('meta[property="og:title"],meta[name="twitter:title"],meta[property="og:site_name"]').attr("content",metas[2]),app.$('meta[name=author],meta[property="article:author"]').attr("content",metas[3]),app.$('meta[property="og:type"]').attr("content",metas[4]),app.$('meta[property="og:url"],meta[name="twitter:url"]').attr("content",metas[5]),app.$('meta[property="article:published_time"]').attr("content",metas[6]),app.$('meta[name="twitter:image"]').attr("content",url+model.website.settings["share-images"][0]),app.$(model.website.settings["share-images"]).each(function(index,img){app.$("head").append('<meta property="og:image" content="'+url+img+'" />')}),app.$(".year").html((new Date).getFullYear())},model.encode=app.encode,model.replaceSpace=app.replaceSpace,model.loadDatabase(),model.loadWebsite(),$scope.model=model}]);
//# sourceMappingURL=app.min.js.map